<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Mutal Fund History</title>
    <style>
        table {
          border: 1px solid white;
          border-collapse: collapse;
          width: 100%;
        }
        th {
          border: 1px solid white;
          background-color: #96D4D4;
        }
        td {
          border: 1px solid white;
          background-color: #F0F0F0;
        }
        th, td {
          padding-top: 10px;
          padding-bottom: 10px;
          padding-left: 10px;
          padding-right: 10px;
        }
    </style>
</head>
<body>

{% if view_history %}

<h1>{{ view_history.userFund.get_fundInfo().get_mfName() }}</h1>

    {% if view_history.userFund %}
        <table style="width: 70%;">
            <tr>
                <th>Purchase Date</th>
                <td>{{ view_history.userFund.get_dateCreated() }}</td>
            </tr>
            <tr>
                <th>Purchase Nav</th>
                <td>{{ view_history.userFund.get_purchaseNav() }}
                    {% if (view_history.get_navDiff() < 0) %}
                        <span style="color:red">( {{ view_history.get_navDiff() }} changed since )</span>
                    {% else %}
                        <span style="color:blue">( {{ view_history.get_navDiff() }} changed since )</span>
                    {% endif %}
                </td>
            </tr>
            <tr>
                <th style="width: 50%">Purchase Value</th>
                <td style="width: 50%">{{ view_history.userFund.get_purchaseValue() }}   <span style="color:blue">( {{ view_history.userFund.get_actualValue() }} ** )</span></td>
            </tr>
            <tr>
                <th>Units</th>
                <td>{{ view_history.userFund.get_units() }}</td>
            </tr>
            <tr>
                <th>Current Value</th>
                <td>{{ view_history.userFund.get_latestValue() }}</td>
            </tr>
            <tr>
                <th>Profit/Loss</th>
                <td>{{ view_history.userFund.get_profitLoss() }}   <span style="color:blue">( {{ view_history.userFund.get_noOfDays() }} days )</span></td>
            </tr>
            <tr>
                <th>Improvement</th>
                {% if (view_history.userFund.get_percentile() < 0) %}
                    <td style="color: red;">{{ view_history.userFund.get_percentile() }} %</td>
                {% else %}
                    <td style="color: blue;">{{ view_history.userFund.get_percentile() }} %</td>
                {% endif %}
            </tr>
            <tr>
                <th>Type</th>
                <td>{{ view_history.userFund.get_type() }}</td>
            </tr>
            <tr>
                <th>Last Updated Nav</th>
                <td>{{ view_history.userFund.fundInfo.get_lastUpdated() }}</td>
            </tr>
        </table>
    {% endif %}

    <br />
    ** Stamp Duty : <span style="color:blue">( {{ view_history.userFund.get_stampPercent() }} % )</span>
    <br />
    <br />

    {% if view_history.historyList %}

        <table>
            <tr>
                <th>As On</th>
                <th>NAV</th>
                <th>Value AsOn</th>
                <th>Last Updated</th>
            </tr>
            {% for row in view_history.historyList %}
            <tr>
                <td>{{ row.get_asOn() }}</td>
                <td>{{ row.get_nav() }}</td>
                <td>{{ row.get_asOnValue() }}</td>
                <td>{{ row.get_lastUpdated() }}</td>
            </tr>
            {% endfor %}
        </table>
    {% endif %}

{% else %}
  <h1>No Fund History found !</h1>
{% endif %}

</body>
</html>